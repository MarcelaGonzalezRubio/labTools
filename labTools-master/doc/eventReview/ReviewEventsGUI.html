<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of ReviewEventsGUI</title>
  <meta name="keywords" content="ReviewEventsGUI">
  <meta name="description" content="ReviewEventsGUI  Plots data in experimentData object and allows you to">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">eventReview</a> &gt; ReviewEventsGUI.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for eventReview&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>ReviewEventsGUI
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>ReviewEventsGUI  Plots data in experimentData object and allows you to</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function varargout = ReviewEventsGUI(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> ReviewEventsGUI  Plots data in experimentData object and allows you to
                  add or remove events (HS, TO), and label strides as good
                  or bad.%      

 See also: experimentData</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="disableFields.html" class="code" title="function handles = disableFields(handles,varargin)">disableFields</a>	</li><li><a href="enableFields.html" class="code" title="function handles = enableFields(handles,varargin)">enableFields</a>	</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function ReviewEventsGUI_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = ReviewEventsGUI_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function uiOpenFile_ClickedCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function condMenu_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function trialMenu_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function TPdataType_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function TPfield_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub8" class="code">function BPdataType_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub9" class="code">function BPfield_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub10" class="code">function [plotFields] = makeFieldList(hObject,handles,fieldListHandle)</a></li><li><a href="#_sub11" class="code">function timeSlider_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub12" class="code">function maxCheck_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function plot_button_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function last=plotData(handles,fieldHandle,dataTypeHandle,fieldList,axesHandle)</a></li><li><a href="#_sub15" class="code">function next_button_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function back_button_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function eventButton_SelectionChangeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function delete_button_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function deleteNbutton_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function add_button_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function eventType_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function labelBadButton_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function labelGoodButton_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function showBadCheck_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub25" class="code">function save_button_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub26" class="code">function uiSaveButton_ClickedCallback(hObject, eventdata, handles)</a></li><li><a href="#_sub27" class="code">function write_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub28" class="code">function GUI_window_CloseRequestFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub29" class="code">function directory_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function subject_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function condMenu_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub32" class="code">function trialMenu_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub33" class="code">function TPfield_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub34" class="code">function TPdataType_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub35" class="code">function BPdataType_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub36" class="code">function BPfield_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub37" class="code">function eventType_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub38" class="code">function timeSlider_CreateFcn(hObject, eventdata, handles)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = ReviewEventsGUI(varargin)</a>
0002 <span class="comment">% ReviewEventsGUI  Plots data in experimentData object and allows you to</span>
0003 <span class="comment">%                  add or remove events (HS, TO), and label strides as good</span>
0004 <span class="comment">%                  or bad.%</span>
0005 <span class="comment">%</span>
0006 <span class="comment">% See also: experimentData</span>
0007 
0008 <span class="comment">%In all functions:</span>
0009 <span class="comment">% hObject    handle to object calling function (see GCBO)</span>
0010 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0011 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0012 
0013 
0014 <span class="comment">% Last Modified by GUIDE v2.5 15-May-2015 15:52:21</span>
0015 
0016 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0017 gui_Singleton = 1;
0018 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0019     <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0020     <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction ReviewEventsGUI_OpeningFcn(hObject, eventdata, handles, varargin)">ReviewEventsGUI_OpeningFcn</a>, <span class="keyword">...</span>
0021     <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = ReviewEventsGUI_OutputFcn(hObject, eventdata, handles)">ReviewEventsGUI_OutputFcn</a>, <span class="keyword">...</span>
0022     <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0023     <span class="string">'gui_Callback'</span>,   []);
0024 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0025     gui_State.gui_Callback = str2func(varargin{1});
0026 <span class="keyword">end</span>
0027 
0028 <span class="keyword">if</span> nargout
0029     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0030 <span class="keyword">else</span>
0031     gui_mainfcn(gui_State, varargin{:});
0032 <span class="keyword">end</span>
0033 <span class="comment">% End initialization code - DO NOT EDIT</span>
0034 <span class="keyword">end</span>
0035 
0036 
0037 <span class="comment">%% --- Executes just before ReviewEventsGUI is made visible.</span>
0038 <a name="_sub1" href="#_subfunctions" class="code">function ReviewEventsGUI_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0039 <span class="comment">% This function has no output args, see OutputFcn.</span>
0040 <span class="comment">% varargin   command line arguments to ReviewEventsGUI (see VARARGIN)</span>
0041 
0042 <span class="comment">%initialize values</span>
0043 handles.output=hObject;
0044 handles.changed=false;
0045 handles.saved=false;
0046 handles.backButtonFlag=false;
0047 handles.type=<span class="string">''</span>;
0048 
0049 <span class="comment">% Update handles structure</span>
0050 guidata(hObject, handles);
0051 
0052 <span class="comment">%Set text that pops up when fields of GUI are hovered over. Note: sprintf</span>
0053 <span class="comment">%used to allow line breaks in tool tip string.</span>
0054 set(handles.delete_button,<span class="string">'TooltipString'</span>,sprintf([<span class="string">'Use crosshair to select the event(s) that need deleted. \n'</span><span class="keyword">...</span>
0055 <span class="string">'Press the return (enter) key after clicking on the event(s) to delete them.'</span>]));
0056 set(handles.deleteNbutton,<span class="string">'TooltipString'</span>,sprintf([<span class="string">'Use crosshair to select the start and end of a range of events to be deleted.\n'</span><span class="keyword">...</span>
0057 <span class="string">'ALL events in this range are removed.'</span>]));
0058 
0059 <span class="comment">% UIWAIT makes ReviewEventsGUI wait for user response (see UIRESUME)</span>
0060 <span class="comment">% uiwait(handles.GUI_window);</span>
0061 <span class="keyword">end</span>
0062 
0063 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0064 <a name="_sub2" href="#_subfunctions" class="code">function varargout = ReviewEventsGUI_OutputFcn(hObject, eventdata, handles)</a>
0065 
0066 <span class="comment">%Set GUI position to middle of screen (not sure why this code only works</span>
0067 <span class="comment">%within this function...)</span>
0068 <span class="comment">% left, bottom, width, height</span>
0069 scrsz = get(0,<span class="string">'ScreenSize'</span>); 
0070 set(gcf,<span class="string">'Units'</span>,<span class="string">'pixels'</span>);
0071 guiPos = get(gcf,<span class="string">'Position'</span>);
0072 width=min([guiPos(3) scrsz(3)]);
0073 height=min([guiPos(4) scrsz(4)]);
0074 set(gcf, <span class="string">'Position'</span>, [(scrsz(3)-width)/2 (scrsz(4)-height)/2 width height]);
0075 
0076 <span class="comment">% Get default command line output from handles structure</span>
0077 varargout{1} = handles.output;
0078 <span class="keyword">end</span>
0079 
0080 
0081 <span class="comment">%% -------------------------Open subject file--------------------------</span>
0082 
0083 <a name="_sub3" href="#_subfunctions" class="code">function uiOpenFile_ClickedCallback(hObject, eventdata, handles)</a>
0084 
0085 <span class="comment">%If a subject's file is currently open, ask to save.</span>
0086 <span class="keyword">if</span> isfield(handles,<span class="string">'filename'</span>) &amp;&amp; ~handles.changed &amp;&amp; ~handles.saved
0087     choice = questdlg([<span class="string">'Do you want to save changes made to '</span>,handles.filename,<span class="string">'?'</span>], <span class="keyword">...</span>
0088     <span class="string">'ReviewEventsGUI'</span>, <span class="keyword">...</span>
0089     <span class="string">'Save'</span>,<span class="string">'Don''t Save'</span>,<span class="string">'Cancel'</span>,<span class="string">'Save'</span>);
0090     <span class="keyword">switch</span> choice
0091         <span class="keyword">case</span> <span class="string">'Save'</span>
0092             handles.changed=true;
0093         <span class="keyword">case</span> <span class="string">'Don''t Save'</span>
0094             handles.changed=false;
0095         <span class="keyword">case</span> {<span class="string">'Cancel'</span>,<span class="string">''</span>}
0096             <span class="keyword">return</span>
0097     <span class="keyword">end</span>
0098 <span class="keyword">end</span>
0099 
0100 <span class="keyword">if</span> handles.changed
0101     <a href="#_sub27" class="code" title="subfunction write_Callback(hObject, eventdata, handles)">write_Callback</a>(handles.write,eventdata,handles)
0102 <span class="keyword">end</span>
0103 
0104 [handles.filename,handles.Dir]=uigetfile(<span class="string">'*.mat'</span>,<span class="string">'Choose subject file'</span>); <span class="comment">%opens browse window</span>
0105 
0106 <span class="keyword">if</span> handles.filename~=0
0107     <span class="keyword">global</span> expData
0108     
0109     <span class="comment">%Disable everything</span>
0110     handles=<a href="disableFields.html" class="code" title="function handles = disableFields(handles,varargin)">disableFields</a>(handles,<span class="string">'plot_button'</span>,<span class="string">'next_button'</span>,<span class="string">'back_button'</span>,<span class="keyword">...</span>
0111         <span class="string">'delete_button'</span>,<span class="string">'deleteNbutton'</span>,<span class="string">'save_button'</span>,<span class="string">'add_button'</span>,<span class="keyword">...</span>
0112         <span class="string">'BPdataType'</span>,<span class="string">'BPfield'</span>,<span class="string">'TPdataType'</span>,<span class="string">'TPfield'</span>,<span class="string">'condMenu'</span>,<span class="string">'trialMenu'</span>,<span class="keyword">...</span>
0113         <span class="string">'timeSlider'</span>,<span class="string">'maxCheck'</span>,<span class="string">'defaultRadio'</span>,<span class="string">'kinematicRadio'</span>,<span class="string">'forceRadio'</span>,<span class="keyword">...</span>
0114         <span class="string">'labelBadButton'</span>,<span class="string">'labelGoodButton'</span>,<span class="string">'showBadCheck'</span>);
0115     drawnow
0116     
0117     aux=load([handles.Dir handles.filename]); <span class="comment">%.mat file can only contain 1 variable, of the experimentData type</span>
0118     fieldNames=fields(aux);
0119     handles.varName=fieldNames{1};
0120     
0121     expData=aux.(fieldNames{1});
0122     <span class="keyword">if</span> isa(expData,<span class="string">'experimentData'</span>) &amp;&amp; expData.isProcessed <span class="comment">%if not processed, there will be no events to review</span>
0123                 
0124         <span class="comment">%Enable things</span>
0125         handles=<a href="enableFields.html" class="code" title="function handles = enableFields(handles,varargin)">enableFields</a>(handles,<span class="string">'plot_button'</span>,<span class="string">'next_button'</span>,<span class="string">'delete_button'</span>,<span class="keyword">...</span>
0126             <span class="string">'deleteNbutton'</span>,<span class="string">'save_button'</span>,<span class="string">'add_button'</span>,<span class="string">'BPdataType'</span>,<span class="string">'BPfield'</span>,<span class="keyword">...</span>
0127             <span class="string">'TPdataType'</span>,<span class="string">'TPfield'</span>,<span class="string">'timeSlider'</span>,<span class="string">'maxCheck'</span>,<span class="string">'defaultRadio'</span>,<span class="keyword">...</span>
0128             <span class="string">'showBadCheck'</span>,<span class="string">'condMenu'</span>,<span class="string">'labelBadButton'</span>,<span class="string">'labelGoodButton'</span>);
0129         <span class="keyword">if</span> length(expData.data{end}.gaitEvents.labels)==12
0130             set(handles.kinematicRadio,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0131             set(handles.forceRadio,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0132         <span class="keyword">end</span>        
0133         
0134         <span class="comment">%initialize condition menu:</span>
0135         condDes = expData.metaData.conditionName;
0136         set(handles.condMenu, <span class="string">'String'</span>,condDes(~cellfun(<span class="string">'isempty'</span>,condDes))); <span class="comment">%this is for the case when a condition number was skipped</span>
0137         set(handles.condMenu, <span class="string">'Value'</span>,1);
0138         set(handles.trialMenu,<span class="string">'Value'</span>,1);
0139         guidata(hObject, handles);
0140         <a href="#_sub4" class="code" title="subfunction condMenu_Callback(hObject, eventdata, handles)">condMenu_Callback</a>(handles.condMenu, [], handles);
0141     <span class="keyword">else</span>
0142         h_error=errordlg(<span class="string">'Subject file must contain a processed object of the class ''experimentData'''</span>,<span class="string">'Subject Error'</span>);
0143         waitfor(h_error)       
0144     <span class="keyword">end</span>    
0145 <span class="keyword">end</span>
0146 <span class="keyword">end</span>
0147 
0148 
0149 
0150 <span class="comment">%% ---------------------------Select condition----------------------------</span>
0151 
0152 <span class="comment">% --- Executes on selection change in condMenu.</span>
0153 <a name="_sub4" href="#_subfunctions" class="code">function condMenu_Callback(hObject, eventdata, handles)</a>
0154 
0155 <span class="comment">% check back button ability</span>
0156 <span class="keyword">if</span> get(hObject,<span class="string">'value'</span>)&gt;1
0157     set(handles.back_button,<span class="string">'enable'</span>,<span class="string">'on'</span>)
0158 <span class="keyword">else</span>
0159     set(handles.back_button,<span class="string">'enable'</span>,<span class="string">'off'</span>)
0160 <span class="keyword">end</span>
0161 
0162 <span class="keyword">global</span> expData
0163 condOptions=get(hObject,<span class="string">'string'</span>);
0164 condStr=condOptions(get(hObject,<span class="string">'Value'</span>));
0165 handles.Condition=find(strcmp(expData.metaData.conditionName,condStr));
0166 
0167 s={};
0168 <span class="keyword">for</span> i=1:length(expData.metaData.trialsInCondition{handles.Condition})
0169     s{i}=num2str(expData.metaData.trialsInCondition{handles.Condition}(i));
0170 <span class="keyword">end</span>
0171 <span class="keyword">if</span> isempty(s)
0172     cla(handles.axes1)
0173     cla(handles.axes2)
0174     <span class="comment">%Disable everything (besides condMenu)</span>
0175      handles=<a href="disableFields.html" class="code" title="function handles = disableFields(handles,varargin)">disableFields</a>(handles,<span class="string">'plot_button'</span>,<span class="string">'next_button'</span>,<span class="string">'back_button'</span>,<span class="keyword">...</span>
0176         <span class="string">'delete_button'</span>,<span class="string">'deleteNbutton'</span>,<span class="string">'save_button'</span>,<span class="string">'add_button'</span>,<span class="keyword">...</span>
0177         <span class="string">'BPdataType'</span>,<span class="string">'BPfield'</span>,<span class="string">'TPdataType'</span>,<span class="string">'TPfield'</span>,<span class="string">'trialMenu'</span>,<span class="keyword">...</span>
0178         <span class="string">'timeSlider'</span>,<span class="string">'maxCheck'</span>,<span class="string">'defaultRadio'</span>,<span class="string">'kinematicRadio'</span>,<span class="string">'forceRadio'</span>,<span class="keyword">...</span>
0179         <span class="string">'labelBadButton'</span>,<span class="string">'labelGoodButton'</span>,<span class="string">'showBadCheck'</span>);
0180     drawnow
0181 <span class="keyword">else</span>
0182     <span class="comment">%enable everything</span>
0183     handles=<a href="enableFields.html" class="code" title="function handles = enableFields(handles,varargin)">enableFields</a>(handles,<span class="string">'plot_button'</span>,<span class="string">'next_button'</span>,<span class="string">'delete_button'</span>,<span class="keyword">...</span>
0184         <span class="string">'deleteNbutton'</span>,<span class="string">'save_button'</span>,<span class="string">'add_button'</span>,<span class="string">'BPdataType'</span>,<span class="string">'BPfield'</span>,<span class="keyword">...</span>
0185         <span class="string">'TPdataType'</span>,<span class="string">'TPfield'</span>,<span class="string">'trialMenu'</span>,<span class="string">'timeSlider'</span>,<span class="string">'maxCheck'</span>,<span class="string">'trialMenu'</span>,<span class="keyword">...</span>
0186         <span class="string">'defaultRadio'</span>,<span class="string">'showBadCheck'</span>,<span class="string">'labelBadButton'</span>,<span class="string">'labelGoodButton'</span>);   
0187     <span class="keyword">if</span> length(expData.data{end}.gaitEvents.labels)==12
0188         set(handles.kinematicRadio,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0189         set(handles.forceRadio,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0190     <span class="keyword">end</span>
0191     <span class="comment">%set other values</span>
0192     set(handles.trialMenu, <span class="string">'String'</span>,s);
0193     <span class="keyword">if</span> handles.backButtonFlag
0194         set(handles.trialMenu, <span class="string">'Value'</span>,length(s));
0195     <span class="keyword">else</span>
0196         set(handles.trialMenu, <span class="string">'Value'</span>,1);
0197     <span class="keyword">end</span>
0198     handles.backButtonFlag=false;
0199     
0200     guidata(hObject, handles)
0201     <a href="#_sub5" class="code" title="subfunction trialMenu_Callback(hObject, eventdata, handles)">trialMenu_Callback</a>(handles.trialMenu, eventdata, handles);
0202 <span class="keyword">end</span>
0203 
0204 <span class="keyword">end</span>
0205 
0206 
0207 <span class="comment">%% ---------------------------------------------------------------------</span>
0208 <span class="comment">%Select specific trial:</span>
0209 
0210 <a name="_sub5" href="#_subfunctions" class="code">function trialMenu_Callback(hObject, eventdata, handles)</a>
0211 
0212 <span class="comment">% check back button ability</span>
0213 <span class="keyword">if</span> get(handles.condMenu,<span class="string">'value'</span>)==1 &amp;&amp; get(hObject,<span class="string">'value'</span>)==1
0214     set(handles.back_button,<span class="string">'enable'</span>,<span class="string">'off'</span>)
0215 <span class="keyword">else</span>
0216     set(handles.back_button,<span class="string">'enable'</span>,<span class="string">'on'</span>)
0217 <span class="keyword">end</span>
0218 
0219 <span class="keyword">global</span> expData
0220 handles.idx=expData.metaData.trialsInCondition{handles.Condition}(get(hObject,<span class="string">'Value'</span>));
0221 handles.TSlist={};
0222 handles.trialEvents=expData.data{handles.idx}.gaitEvents;
0223 <span class="comment">%determine reference leg</span>
0224 <span class="keyword">if</span> expData.data{handles.idx}.metaData.refLeg == <span class="string">'R'</span>
0225     handles.slow = <span class="string">'R'</span>;
0226     handles.fast = <span class="string">'L'</span>;
0227 <span class="keyword">else</span>
0228     handles.slow = <span class="string">'L'</span>;
0229     handles.fast = <span class="string">'R'</span>;
0230 <span class="keyword">end</span>
0231 <span class="comment">% get condition description and any observations</span>
0232 set(handles.condDescripText,<span class="string">'string'</span>,expData.data{handles.idx}.metaData.description)
0233 set(handles.observationText,<span class="string">'string'</span>,[<span class="string">'Observations: '</span> expData.data{handles.idx}.metaData.observations])
0234 set(handles.write,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
0235 fieldList=fields(expData.data{handles.idx});
0236 <span class="keyword">for</span> i=1:length(fieldList)
0237     eval([<span class="string">'curField=expData.data{handles.idx}.'</span> fieldList{i} <span class="string">';'</span>]);
0238     <span class="keyword">if</span> isa(curField,<span class="string">'labTimeSeries'</span>)
0239         handles.TSlist{end+1}=fieldList{i};
0240     <span class="keyword">end</span>
0241 <span class="keyword">end</span>
0242 clear curField fieldList
0243 set(handles.BPdataType,<span class="string">'String'</span>,handles.TSlist);
0244 set(handles.TPdataType,<span class="string">'String'</span>,handles.TSlist);
0245 <span class="keyword">if</span> get(handles.BPdataType,<span class="string">'Value'</span>)&gt;length(get(handles.BPdataType,<span class="string">'String'</span>))
0246     set(handles.BPdataType,<span class="string">'Value'</span>,1);
0247 <span class="keyword">end</span>
0248 <span class="keyword">if</span> get(handles.TPdataType,<span class="string">'Value'</span>)&gt;length(get(handles.TPdataType,<span class="string">'String'</span>))
0249     set(handles.TPdataType,<span class="string">'Value'</span>,1);
0250 <span class="keyword">end</span>
0251 <span class="comment">%initialize start/stop times to plot</span>
0252 set(handles.minText,<span class="string">'string'</span>,<span class="string">'1'</span>)
0253 maxTime=ceil(expData.data{handles.idx}.gaitEvents.Time(end));
0254 TW=round(get(handles.timeSlider,<span class="string">'Value'</span>));
0255 <span class="keyword">if</span> TW&gt;maxTime || get(handles.maxCheck,<span class="string">'value'</span>)
0256     handles.timeWindow=maxTime;
0257     handles.tstop=maxTime;
0258     set(handles.timeSlider,<span class="string">'Value'</span>,maxTime);
0259 <span class="keyword">else</span>
0260     handles.timeWindow=TW;
0261     handles.tstop=TW;
0262 <span class="keyword">end</span>
0263 set(handles.maxText,<span class="string">'string'</span>,num2str(maxTime));
0264 set(handles.timeSlider,<span class="string">'max'</span>,maxTime);
0265 set(handles.timeSlider,<span class="string">'SliderStep'</span>,[1/(maxTime-1) 1/(maxTime-1)]) <span class="comment">%1 is the lower limit</span>
0266 handles.tstart=0;
0267 set(handles.timeWindowText,<span class="string">'String'</span>,handles.timeWindow);
0268 <a href="#_sub6" class="code" title="subfunction TPdataType_Callback(hObject, eventdata, handles)">TPdataType_Callback</a>(handles.TPdataType,eventdata,handles);
0269 <span class="keyword">end</span>
0270 
0271 <span class="comment">%% -------------------------Data Selection -------------------------------</span>
0272 
0273 <a name="_sub6" href="#_subfunctions" class="code">function TPdataType_Callback(hObject, eventdata, handles)</a>
0274 handles.TPfieldlist = <a href="#_sub10" class="code" title="subfunction [plotFields] = makeFieldList(hObject,handles,fieldListHandle)">makeFieldList</a>(hObject,handles,handles.TPfield);
0275 <a href="#_sub7" class="code" title="subfunction TPfield_Callback(hObject, eventdata, handles)">TPfield_Callback</a>(handles.TPfield, eventdata, handles)
0276 <span class="keyword">end</span>
0277 
0278 <a name="_sub7" href="#_subfunctions" class="code">function TPfield_Callback(hObject, eventdata, handles)</a>
0279 handles.last=<a href="#_sub14" class="code" title="subfunction last=plotData(handles,fieldHandle,dataTypeHandle,fieldList,axesHandle)">plotData</a>(handles,handles.TPfield,handles.TPdataType,handles.TPfieldlist,handles.axes1);
0280 <a href="#_sub8" class="code" title="subfunction BPdataType_Callback(hObject, eventdata, handles)">BPdataType_Callback</a>(handles.BPdataType,eventdata,handles);
0281 <span class="keyword">end</span>
0282 
0283 
0284 <a name="_sub8" href="#_subfunctions" class="code">function BPdataType_Callback(hObject, eventdata, handles)</a>
0285 handles.BPfieldlist = <a href="#_sub10" class="code" title="subfunction [plotFields] = makeFieldList(hObject,handles,fieldListHandle)">makeFieldList</a>(hObject,handles,handles.BPfield);
0286 <a href="#_sub9" class="code" title="subfunction BPfield_Callback(hObject, eventdata, handles)">BPfield_Callback</a>(handles.BPfield, eventdata, handles)
0287 <span class="keyword">end</span>
0288 
0289 <a name="_sub9" href="#_subfunctions" class="code">function BPfield_Callback(hObject, eventdata, handles)</a>
0290 handles.last=<a href="#_sub14" class="code" title="subfunction last=plotData(handles,fieldHandle,dataTypeHandle,fieldList,axesHandle)">plotData</a>(handles,handles.BPfield,handles.BPdataType,handles.BPfieldlist,handles.axes2);
0291 guidata(hObject, handles)
0292 <span class="keyword">end</span>
0293 
0294 <a name="_sub10" href="#_subfunctions" class="code">function [plotFields] = makeFieldList(hObject,handles,fieldListHandle)</a>
0295 
0296 <span class="keyword">global</span> expData
0297 
0298 curTS=expData.data{handles.idx}.(handles.TSlist{get(hObject,<span class="string">'Value'</span>)});
0299 fields={};
0300 plotFields={};
0301 set(fieldListHandle,<span class="string">'enable'</span>,<span class="string">'on'</span>)
0302 
0303 <span class="comment">%The following code removes redundant options in the feild list by</span>
0304 <span class="comment">%combinging 'R' and 'L' data as well as 'Fast' and 'Slow' adaptation</span>
0305 <span class="comment">%parameters.</span>
0306 <span class="comment">%note that two cells need to be created: one with the list of options for</span>
0307 <span class="comment">%the drop-down list(feilds) and another that matches each option with the data to</span>
0308 <span class="comment">%plot (plotFields)</span>
0309 
0310 <span class="keyword">for</span> i=1:length(curTS.labels)
0311     <span class="keyword">if</span> strcmp(curTS.labels{i}(1),handles.fast) <span class="comment">%'L' or 'R'</span>
0312         <span class="keyword">if</span> any(strcmp(curTS.labels,[handles.slow,curTS.labels{i}(2:end)])) <span class="comment">%check there is a corresponding slow label</span>
0313             <span class="keyword">if</span> length(curTS.labels)==2 <span class="comment">%case where there is only two labels (matlab doesn't like dropdown menus with only one option)</span>
0314                 set(fieldListHandle,<span class="string">'enable'</span>,<span class="string">'off'</span>)
0315                 set(fieldListHandle,<span class="string">'Value'</span>,1)
0316                 fields = {<span class="string">''</span>,<span class="string">''</span>};
0317                 plotFields{end+1} = {curTS.labels{i},[handles.slow,curTS.labels{i}(2:end)]};
0318             <span class="keyword">elseif</span> length(curTS.labels{i}) == 1 <span class="comment">% just 'R' or 'L' (beltspeedreadData for ex)</span>
0319                 fields=handles.TSlist{get(hObject,<span class="string">'Value'</span>)};
0320                 plotFields{end+1} = {handles.fast,handles.slow};
0321             <span class="keyword">else</span>
0322                 fields{end+1}=curTS.labels{i}(2:end);
0323                 plotFields{end+1} = {curTS.labels{i},[handles.slow,curTS.labels{i}(2:end)]};
0324             <span class="keyword">end</span>
0325         <span class="keyword">else</span>
0326             <span class="comment">%slow label is missing</span>
0327             fields{end+1}=strrep(curTS.labels{i},handles.fast,<span class="string">'F'</span>);
0328             plotFields{end+1} = curTS.labels{i};
0329         <span class="keyword">end</span>
0330     <span class="keyword">elseif</span> strcmp(curTS.labels{i}(1),handles.slow)
0331         <span class="keyword">if</span> ~any(strcmp(curTS.labels,[handles.fast,curTS.labels{i}(2:end)]))
0332             <span class="comment">%fast label is missing</span>
0333             fields{end+1}=strrep(curTS.labels{i},handles.slow,<span class="string">'S'</span>);
0334             plotFields{end+1}=curTS.labels{i};
0335         <span class="keyword">else</span>
0336             <span class="comment">% already have a slow label so do nothing</span>
0337         <span class="keyword">end</span>            
0338     <span class="keyword">elseif</span> strcmpi(curTS.labels{i}(max([end-3 1]):end),<span class="string">'Fast'</span>)
0339         fields{end+1}=curTS.labels{i}(1:end-4);
0340         plotFields{end+1} = {curTS.labels{i},[curTS.labels{i}(1:end-4),<span class="string">'Slow'</span>]};
0341     <span class="keyword">elseif</span> strcmpi(curTS.labels{i}(max([end-3 1]):end),<span class="string">'Slow'</span>)
0342         <span class="comment">%assume we also have a fast label and do nothing</span>
0343     <span class="keyword">else</span>
0344         fields{end+1}=curTS.labels{i};
0345         plotFields{end+1} = curTS.labels{i};
0346     <span class="keyword">end</span>
0347 <span class="keyword">end</span>
0348 
0349 set(fieldListHandle,<span class="string">'String'</span>,fields);
0350 <span class="keyword">if</span> get(fieldListHandle,<span class="string">'Value'</span>)&gt;length(get(fieldListHandle,<span class="string">'String'</span>))
0351     set(fieldListHandle,<span class="string">'Value'</span>,1);
0352 <span class="keyword">end</span>
0353 clear curTS
0354 guidata(hObject, handles)
0355 <span class="keyword">end</span>
0356 
0357 
0358 
0359 <span class="comment">%% -----------------------------PLOTTING:----------------------------------</span>
0360 
0361 <span class="comment">% --- Executes on slider movement.</span>
0362 <a name="_sub11" href="#_subfunctions" class="code">function timeSlider_Callback(hObject, eventdata, handles)</a>
0363 <span class="comment">% Hints: get(hObject,'Value') returns position of slider</span>
0364 <span class="comment">%        get(hObject,'Min') and get(hObject,'Max') to determine range of slider</span>
0365 handles.timeWindow=round(get(hObject,<span class="string">'Value'</span>));
0366 
0367 <span class="comment">% % % %to make zoomed-in time window start in middle of previous time window: % % % %</span>
0368 <span class="comment">% timeToAdd=handles.timeWindow-(handles.tstop-handles.tstart);</span>
0369 <span class="comment">% time1=max([handles.tstart-floor(timeToAdd/2) 0]);</span>
0370 <span class="comment">% handles.tstop=handles.tstop+ceil(timeToAdd-(handles.tstart-time1));</span>
0371 <span class="comment">% handles.tstart=time1;</span>
0372 
0373 <span class="comment">% % % to make zoomed-in time window start at the beginning of the trial: % % % % %</span>
0374 <span class="comment">% handles.tstop=handles.timeWindow;</span>
0375 <span class="comment">% handles.tstart=0;</span>
0376 
0377 <span class="comment">% % % %to make zoomed-in time window start at beginning of previous time window: % % % %</span>
0378 handles.tstop=handles.tstart+handles.timeWindow;
0379 
0380 set(handles.timeWindowText,<span class="string">'string'</span>,handles.timeWindow);
0381 guidata(hObject, handles)
0382 <a href="#_sub13" class="code" title="subfunction plot_button_Callback(hObject, eventdata, handles)">plot_button_Callback</a>(handles.plot_button,eventdata,handles)
0383 <span class="keyword">end</span>
0384 
0385 <span class="comment">% --- Executes on button press in maxCheck.</span>
0386 <a name="_sub12" href="#_subfunctions" class="code">function maxCheck_Callback(hObject, eventdata, handles)</a>
0387 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of maxCheck</span>
0388 <span class="keyword">global</span> expData
0389 maxTime=ceil(expData.data{handles.idx}.gaitEvents.Time(end));
0390 set(handles.timeSlider,<span class="string">'enable'</span>,<span class="string">'on'</span>);
0391 <span class="keyword">if</span> get(handles.maxCheck,<span class="string">'value'</span>)
0392     handles.timeWindow=maxTime;
0393     handles.tstop=maxTime;
0394     set(handles.timeSlider,<span class="string">'Value'</span>,maxTime);
0395     set(handles.timeWindowText,<span class="string">'String'</span>,handles.timeWindow);
0396     set(handles.timeSlider,<span class="string">'enable'</span>,<span class="string">'off'</span>);
0397 <span class="keyword">end</span>
0398 <a href="#_sub13" class="code" title="subfunction plot_button_Callback(hObject, eventdata, handles)">plot_button_Callback</a>(handles.plot_button,eventdata,handles)
0399 <span class="keyword">end</span>
0400 
0401 <span class="comment">% --- Executes on button press in plot_button.</span>
0402 <a name="_sub13" href="#_subfunctions" class="code">function plot_button_Callback(hObject, eventdata, handles)</a>
0403 
0404 <span class="comment">%Top plot:</span>
0405 handles.last=<a href="#_sub14" class="code" title="subfunction last=plotData(handles,fieldHandle,dataTypeHandle,fieldList,axesHandle)">plotData</a>(handles,handles.TPfield,handles.TPdataType,handles.TPfieldlist,handles.axes1);
0406 
0407 <span class="comment">%Bottom plot:</span>
0408 handles.last=<a href="#_sub14" class="code" title="subfunction last=plotData(handles,fieldHandle,dataTypeHandle,fieldList,axesHandle)">plotData</a>(handles,handles.BPfield,handles.BPdataType,handles.BPfieldlist,handles.axes2);
0409 
0410 drawnow
0411 guidata(hObject, handles)
0412 <span class="keyword">end</span>
0413 
0414 <a name="_sub14" href="#_subfunctions" class="code">function last=plotData(handles,fieldHandle,dataTypeHandle,fieldList,axesHandle)</a>
0415 
0416 linkaxes([handles.axes1,handles.axes2],<span class="string">'x'</span>)
0417 
0418 <span class="keyword">global</span> expData
0419 
0420 value=get(fieldHandle,<span class="string">'Value'</span>);
0421 dataType=handles.TSlist{get(dataTypeHandle,<span class="string">'Value'</span>)};
0422 
0423 TSdata=expData.data{handles.idx}.(dataType);
0424 <span class="keyword">if</span> isa(TSdata,<span class="string">'parameterSeries'</span>)
0425     times=TSdata.hiddenTime;    
0426 <span class="keyword">else</span>
0427     times=TSdata.Time;
0428 <span class="keyword">end</span>
0429 
0430 <span class="keyword">if</span> times(end)&lt;handles.tstop || get(handles.maxCheck,<span class="string">'value'</span>)
0431     endSamp=length(times);
0432     startSamp=max([1 endSamp-find(times&lt;=handles.timeWindow,1,<span class="string">'last'</span>)]);
0433     last=1;    
0434 <span class="keyword">else</span>
0435     startSamp=max([1 find(times&gt;=handles.tstart,1,<span class="string">'first'</span>)]);
0436     endSamp=max([startSamp find(times&lt;=handles.tstop,1,<span class="string">'last'</span>)]);
0437     last=0;
0438 <span class="keyword">end</span>
0439 
0440 time=times(startSamp:endSamp); <span class="comment">%should be same as time=handles.tstart:TSdata.sampPeriod:handles.tstop</span>
0441 set(axesHandle,<span class="string">'nextplot'</span>,<span class="string">'replace'</span>)
0442 <span class="keyword">if</span> length(fieldList{value})==2
0443     <span class="comment">%get data to plot</span>
0444     FdataTS=TSdata.getDataAsTS(fieldList{value}{1});
0445     SdataTS=TSdata.getDataAsTS(fieldList{value}{2});
0446     <span class="keyword">if</span> strcmp(dataType,<span class="string">'adaptParams'</span>)        
0447         label=fieldList{value}{1}(1:end-4);
0448         <span class="comment">%plot data</span>
0449         bad=TSdata.bad(startSamp:endSamp);
0450         badStrides=find(bad);
0451         goodStrides=find(~bad);
0452         plot(axesHandle,time(goodStrides),FdataTS.Data(goodStrides),<span class="string">'r.'</span>,<span class="string">'MarkerSize'</span>,20);
0453         set(axesHandle,<span class="string">'nextplot'</span>,<span class="string">'add'</span>)
0454         plot(axesHandle,time(goodStrides),SdataTS.Data(goodStrides),<span class="string">'b.'</span>,<span class="string">'MarkerSize'</span>,20);
0455         legendEntries = {<span class="string">'Fast'</span>,<span class="string">'Slow'</span>};
0456         <span class="keyword">if</span> get(handles.showBadCheck,<span class="string">'Value'</span>)
0457              plot(axesHandle,time(badStrides),FdataTS.Data(badStrides),<span class="string">'ro'</span>,<span class="string">'MarkerSize'</span>,6);
0458              plot(axesHandle,time(badStrides),SdataTS.Data(badStrides),<span class="string">'bo'</span>,<span class="string">'MarkerSize'</span>,6);
0459              legendEntries ={<span class="string">'Fast'</span>,<span class="string">'Slow'</span>,<span class="string">'Bad Fast'</span>,<span class="string">'Bad Slow'</span>};
0460         <span class="keyword">end</span>
0461         <span class="comment">% do not overlay events</span>
0462     <span class="keyword">else</span>
0463         label=fieldList{value}{1}(2:end);
0464         <span class="comment">%plot data</span>
0465         plot(axesHandle,time,FdataTS.Data(startSamp:endSamp),<span class="string">'r'</span>);
0466         set(axesHandle,<span class="string">'nextplot'</span>,<span class="string">'add'</span>)
0467         plot(axesHandle,time,SdataTS.Data(startSamp:endSamp),<span class="string">'b'</span>);
0468         legendEntries = {<span class="string">'Fast'</span>,<span class="string">'Slow'</span>};
0469         <span class="comment">%Events to plot:</span>
0470         events=handles.trialEvents;
0471         <span class="comment">%event correction factor:</span>
0472         <span class="comment">% TO DO: use a method to make sampling frequencies equivalent instead of using ECF.</span>
0473         ECF = events.sampFreq/TSdata.sampFreq; 
0474         <span class="keyword">for</span> i=1:length(events.labels)
0475             data=events.getDataAsVector(events.labels{i});
0476             eval([events.labels{i} <span class="string">'times=times(startSamp)+events.Time(data(ceil((startSamp-1).*ECF+1):floor((endSamp-1).*ECF+1))==1);'</span>])
0477         <span class="keyword">end</span>
0478         <span class="comment">%Overlay events (only those in the time window...otherwise there</span>
0479         <span class="comment">%will be warnings for the extra legend entries</span>
0480         type=handles.type;
0481         <span class="keyword">if</span> eval([<span class="string">'~isempty('</span>,handles.fast,<span class="string">'HStimes)'</span>])
0482             eval([<span class="string">'plot(axesHandle,'</span>,type,handles.fast,<span class="string">'HStimes,FdataTS.getSample('</span>,type,handles.fast,<span class="string">'HStimes),''kx'',''LineWidth'',2);'</span>])
0483             legendEntries{end+1}=<span class="string">'FHS'</span>;
0484         <span class="keyword">end</span>
0485         <span class="keyword">if</span> eval([<span class="string">'~isempty('</span>,handles.fast,<span class="string">'TOtimes)'</span>])
0486             eval([<span class="string">'plot(axesHandle,'</span>,type,handles.fast,<span class="string">'TOtimes,FdataTS.getSample('</span>,type,handles.fast,<span class="string">'TOtimes),''ks'',''LineWidth'',2);'</span>])
0487             legendEntries{end+1}=<span class="string">'FTO'</span>;
0488         <span class="keyword">end</span>
0489         <span class="keyword">if</span> eval([<span class="string">'~isempty('</span>,handles.slow,<span class="string">'HStimes)'</span>])
0490             eval([<span class="string">'plot(axesHandle,'</span>,type,handles.slow,<span class="string">'HStimes,SdataTS.getSample('</span>,type,handles.slow,<span class="string">'HStimes),''ko'',''LineWidth'',2);'</span>])
0491             legendEntries{end+1}=<span class="string">'SHS'</span>;
0492         <span class="keyword">end</span>
0493         <span class="keyword">if</span> eval([<span class="string">'~isempty('</span>,handles.slow,<span class="string">'TOtimes)'</span>])
0494             eval([<span class="string">'plot(axesHandle,'</span>,type,handles.slow,<span class="string">'TOtimes,SdataTS.getSample('</span>,type,handles.slow,<span class="string">'TOtimes),''k*'',''LineWidth'',2);'</span>])
0495             legendEntries{end+1}=<span class="string">'STO'</span>;
0496         <span class="keyword">end</span>        
0497     <span class="keyword">end</span>
0498 <span class="keyword">else</span>
0499     <span class="comment">%get data to plot</span>
0500     label=fieldList{value};
0501     dataTS=TSdata.getDataAsTS(fieldList{value});
0502     legendEntries = {<span class="string">'data'</span>};
0503     <span class="comment">%plot data</span>
0504     <span class="keyword">if</span> strcmp(dataType,<span class="string">'adaptParams'</span>)             
0505         <span class="comment">%plot data</span>
0506         bad=TSdata.bad(startSamp:endSamp);
0507         badStrides=find(bad);
0508         goodStrides=find(~bad);        
0509         plot(axesHandle,time(goodStrides),dataTS.Data(goodStrides),<span class="string">'b.'</span>,<span class="string">'MarkerSize'</span>,20);  
0510         set(axesHandle,<span class="string">'nextplot'</span>,<span class="string">'add'</span>)
0511         <span class="keyword">if</span> get(handles.showBadCheck,<span class="string">'Value'</span>)
0512              plot(axesHandle,time(badStrides),dataTS.Data(badStrides),<span class="string">'bo'</span>,<span class="string">'MarkerSize'</span>,6);
0513              legendEntries ={<span class="string">'data'</span>,<span class="string">'bad data'</span>};
0514         <span class="keyword">end</span>
0515     <span class="keyword">else</span>
0516         plot(axesHandle,time,dataTS.Data(startSamp:endSamp),<span class="string">'b'</span>); 
0517         set(axesHandle,<span class="string">'nextplot'</span>,<span class="string">'add'</span>)
0518     <span class="keyword">end</span>   
0519 <span class="keyword">end</span>
0520 set(axesHandle,<span class="string">'Xlim'</span>,[handles.tstart handles.tstop]);
0521 h_legend = legend(axesHandle,legendEntries);
0522 set(h_legend,<span class="string">'FontSize'</span>,6)
0523 
0524 title(axesHandle,[label,<span class="string">' '</span>,dataType,<span class="string">' Trial '</span>,num2str(handles.idx)])
0525 
0526 <span class="comment">%Clear vars:</span>
0527 clear RHS* LHS* LTO* RTO* events time
0528 <span class="keyword">end</span>
0529 
0530 <span class="comment">% --- Executes on button press in next_button.</span>
0531 <a name="_sub15" href="#_subfunctions" class="code">function next_button_Callback(hObject, eventdata, handles)</a>
0532 
0533 set(handles.back_button,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
0534 <span class="keyword">if</span> handles.last
0535     <span class="keyword">if</span> length(get(handles.trialMenu,<span class="string">'String'</span>))&gt;get(handles.trialMenu,<span class="string">'Value'</span>)
0536         set(handles.trialMenu,<span class="string">'Value'</span>,get(handles.trialMenu,<span class="string">'Value'</span>)+1); <span class="comment">%Add one to current trial, does this update what the GUI shows?</span>
0537         <a href="#_sub5" class="code" title="subfunction trialMenu_Callback(hObject, eventdata, handles)">trialMenu_Callback</a>(handles.trialMenu, eventdata, handles)
0538     <span class="keyword">elseif</span> get(handles.condMenu,<span class="string">'Value'</span>)&lt;length(get(handles.condMenu,<span class="string">'String'</span>))
0539         set(handles.condMenu,<span class="string">'Value'</span>,get(handles.condMenu,<span class="string">'Value'</span>)+1);
0540         set(handles.trialMenu,<span class="string">'Value'</span>,1);
0541         <a href="#_sub4" class="code" title="subfunction condMenu_Callback(hObject, eventdata, handles)">condMenu_Callback</a>(handles.condMenu, eventdata, handles)
0542     <span class="keyword">else</span>
0543         set(hObject,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
0544         guidata(hObject, handles)
0545     <span class="keyword">end</span>
0546 <span class="keyword">else</span>
0547     handles.tstart=handles.tstart+handles.timeWindow;
0548     handles.tstop=handles.tstop+handles.timeWindow;
0549     <a href="#_sub13" class="code" title="subfunction plot_button_Callback(hObject, eventdata, handles)">plot_button_Callback</a>(handles.plot_button, eventdata, handles)
0550 <span class="keyword">end</span>
0551 
0552 <span class="keyword">end</span>
0553 
0554 
0555 <span class="comment">% --- Executes on button press in back_button.</span>
0556 <a name="_sub16" href="#_subfunctions" class="code">function back_button_Callback(hObject, eventdata, handles)</a>
0557 
0558 set(handles.next_button,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
0559 <span class="keyword">if</span> handles.tstart&gt;0
0560     handles.tstart=handles.tstart-handles.timeWindow;
0561     handles.tstop=handles.tstop-handles.timeWindow;
0562     <a href="#_sub13" class="code" title="subfunction plot_button_Callback(hObject, eventdata, handles)">plot_button_Callback</a>(handles.plot_button, eventdata, handles)
0563 <span class="keyword">elseif</span> get(handles.trialMenu,<span class="string">'Value'</span>)&gt;1
0564     set(handles.trialMenu,<span class="string">'Value'</span>,get(handles.trialMenu,<span class="string">'Value'</span>)-1); <span class="comment">%Add one to current trial, does this update what the GUI shows?</span>
0565     <a href="#_sub5" class="code" title="subfunction trialMenu_Callback(hObject, eventdata, handles)">trialMenu_Callback</a>(handles.trialMenu, eventdata, handles)
0566 <span class="keyword">elseif</span> get(handles.condMenu,<span class="string">'Value'</span>)&gt;1
0567     set(handles.condMenu,<span class="string">'Value'</span>,get(handles.condMenu,<span class="string">'Value'</span>)-1);
0568     handles.backButtonFlag=true;
0569     <a href="#_sub4" class="code" title="subfunction condMenu_Callback(hObject, eventdata, handles)">condMenu_Callback</a>(handles.condMenu, eventdata, handles)
0570 <span class="keyword">else</span>
0571     set(hObject,<span class="string">'Enable'</span>,<span class="string">'off'</span>)
0572     guidata(hObject, handles)
0573 <span class="keyword">end</span>
0574 
0575 <span class="keyword">end</span>
0576 
0577 <span class="comment">%% --------------------------Event Editing:----------------------------------</span>
0578 
0579 <span class="comment">% --- Executes when selected object is changed in event selection button group.</span>
0580 <a name="_sub17" href="#_subfunctions" class="code">function eventButton_SelectionChangeFcn(hObject, eventdata, handles)</a>
0581 <span class="comment">% hObject    handle to the selected object in eventButton</span>
0582 <span class="comment">% eventdata  structure with the following fields (see UIBUTTONGROUP)</span>
0583 <span class="comment">%    EventName: string 'SelectionChanged' (read only)</span>
0584 <span class="comment">%    OldValue: handle of the previously selected object or empty if none was selected</span>
0585 <span class="comment">%    NewValue: handle of the currently selected object</span>
0586 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0587 <span class="keyword">switch</span> get(eventdata.NewValue,<span class="string">'Tag'</span>)
0588     <span class="keyword">case</span> <span class="string">'defaultRadio'</span>
0589         handles.type=<span class="string">''</span>;
0590     <span class="keyword">case</span> <span class="string">'kinematicRadio'</span>
0591         handles.type=<span class="string">'kin'</span>;
0592     <span class="keyword">case</span> <span class="string">'forceRadio'</span>
0593         handles.type=<span class="string">'force'</span>;        
0594 <span class="keyword">end</span>
0595 <a href="#_sub13" class="code" title="subfunction plot_button_Callback(hObject, eventdata, handles)">plot_button_Callback</a>(handles.plot_button, eventdata, handles)
0596 <span class="keyword">end</span>
0597 
0598 <span class="comment">% --- Executes on button press in delete_button.</span>
0599 <a name="_sub18" href="#_subfunctions" class="code">function delete_button_Callback(hObject, eventdata, handles)</a>
0600 
0601 <span class="keyword">global</span> expData
0602 
0603 <span class="comment">%Select event</span>
0604 axes(handles.axes1)
0605 [x,~]=ginput;
0606 
0607 <span class="comment">%Find closest event(s)</span>
0608 allEventsIndexes=find(sum(handles.trialEvents.Data,2)&gt;0);
0609 <span class="keyword">for</span> i=1:length(x);
0610     deltaT=handles.trialEvents.Time(allEventsIndexes)-x(i);  
0611     minDeltaT=min(abs(deltaT));
0612     <span class="keyword">if</span> minDeltaT&lt;1 <span class="comment">%s</span>
0613         <span class="comment">%pad min value to delete events in same region from alt calcualtion</span>
0614         selectedEventTimeIndex=find(abs(deltaT)&lt;minDeltaT+0.05);    
0615         selectedEventIndex=allEventsIndexes(selectedEventTimeIndex);
0616         
0617         <span class="comment">%Eliminate it from handles.trialEvents</span>
0618         handles.trialEvents.Data(selectedEventIndex,:)=false;
0619     <span class="keyword">end</span>
0620 <span class="keyword">end</span>
0621 
0622 <span class="comment">%update events</span>
0623 expData.data{handles.idx}.gaitEvents=handles.trialEvents;
0624 <span class="comment">%update parameters (NOTE: this undoes any stride edits)</span>
0625 expData.data{handles.idx}.adaptParams=calcParameters(expData.data{handles.idx},expData.subData);
0626 
0627 <span class="comment">%Re-plot</span>
0628 guidata(hObject, handles)
0629 <a href="#_sub13" class="code" title="subfunction plot_button_Callback(hObject, eventdata, handles)">plot_button_Callback</a>(handles.plot_button, eventdata, handles)
0630 
0631 <span class="keyword">end</span>
0632 
0633 <span class="comment">% --- Executes on button press in deleteNbutton.</span>
0634 <a name="_sub19" href="#_subfunctions" class="code">function deleteNbutton_Callback(hObject, eventdata, handles)</a>
0635 
0636 <span class="keyword">global</span> expData
0637 
0638 [x,~]=ginput(2);
0639 
0640 <span class="comment">%Find two closest events</span>
0641 allEventsIndexes=find(sum(handles.trialEvents.Data,2)&gt;0);
0642 
0643 deltaTstart=handles.trialEvents.Time(allEventsIndexes)-x(1);
0644 [~,selectedEventTimeIndexStart]=min(deltaTstart.^2);
0645 selectedEventIndexStart=allEventsIndexes(selectedEventTimeIndexStart);
0646 
0647 deltaTend=handles.trialEvents.Time(allEventsIndexes)-x(2);
0648 [~,selectedEventTimeIndexEnd]=min(deltaTend.^2);
0649 selectedEventIndexEnd=allEventsIndexes(selectedEventTimeIndexEnd);
0650     
0651 <span class="comment">%Eliminate all events between two indexes from handles.trialEvents</span>
0652 handles.trialEvents.Data(selectedEventIndexStart:selectedEventIndexEnd,:)=false;
0653 
0654 expData.data{handles.idx}.gaitEvents=handles.trialEvents;
0655 expData.data{handles.idx}.adaptParams=calcParameters(expData.data{handles.idx},expData.subData,handles.type);
0656 
0657 <span class="comment">%Re-plot</span>
0658 guidata(hObject, handles)
0659 <a href="#_sub13" class="code" title="subfunction plot_button_Callback(hObject, eventdata, handles)">plot_button_Callback</a>(handles.plot_button, eventdata, handles)
0660 <span class="keyword">end</span>
0661 
0662 <span class="comment">% --- Executes on button press in add_button.</span>
0663 <a name="_sub20" href="#_subfunctions" class="code">function add_button_Callback(hObject, eventdata, handles)</a>
0664 <span class="comment">%Should this add a TO/HS for all event classes?</span>
0665 
0666 <span class="comment">%Ask subject to select event type: SHS, FHS, STO, FTO</span>
0667 events=handles.trialEvents.getLabels;
0668 events=strrep(events,handles.fast,<span class="string">'F'</span>); <span class="comment">%replace 'R' or 'L' with 'F' or 'S'</span>
0669 events=strrep(events,handles.slow,<span class="string">'S'</span>);
0670 set(handles.eventType,<span class="string">'String'</span>,events)
0671 set(handles.eventType,<span class="string">'Enable'</span>,<span class="string">'on'</span>)
0672 
0673 <span class="comment">%Now the subject should select an event Type, so the function continues on</span>
0674 <span class="comment">%eventType_callback</span>
0675 guidata(hObject, handles)
0676 
0677 <span class="keyword">end</span>
0678 
0679 <span class="comment">% --- Executes on selection change in eventType.</span>
0680 <a name="_sub21" href="#_subfunctions" class="code">function eventType_Callback(hObject, eventdata, handles)</a>
0681 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns eventType contents as cell array</span>
0682 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from eventType</span>
0683 <span class="keyword">global</span> expData
0684 
0685 <span class="comment">%Select location</span>
0686 [x,~]=ginput(1);
0687 
0688 <span class="comment">%create new event in handles.trialEvents</span>
0689 [~,closestTimeIdx]=min(abs((handles.trialEvents.Time-x)));
0690 handles.trialEvents.Data(closestTimeIdx,get(handles.eventType,<span class="string">'Value'</span>))=true;
0691 
0692 expData.data{handles.idx}.gaitEvents=handles.trialEvents;
0693 expData.data{handles.idx}.adaptParams=calcParameters(expData.data{handles.idx},expData.subData,handles.type);
0694 
0695 <span class="comment">%Disable this</span>
0696 set(hObject,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0697 guidata(hObject, handles)
0698 
0699 <span class="comment">%Re-plot</span>
0700 <a href="#_sub13" class="code" title="subfunction plot_button_Callback(hObject, eventdata, handles)">plot_button_Callback</a>(handles.plot_button, eventdata, handles)
0701 <span class="keyword">end</span>
0702 
0703 <span class="comment">%% ---------------------------Stride Editing:-----------------------------</span>
0704 
0705 <span class="comment">% --- Executes on button press in labelBadButton.</span>
0706 <a name="_sub22" href="#_subfunctions" class="code">function labelBadButton_Callback(hObject, eventdata, handles)</a>
0707 
0708 <span class="keyword">global</span> expData
0709 
0710 <span class="comment">%Select stride</span>
0711 axes(handles.axes1)
0712 [x,~]=ginput;
0713 [boolFlag,idxs]=expData.data{handles.idx}.adaptParams.isaLabel({<span class="string">'bad'</span>,<span class="string">'good'</span>});
0714 
0715 <span class="keyword">for</span> i=1:length(x);
0716     deltaT=expData.data{handles.idx}.adaptParams.hiddenTime-x(i);
0717     [~,loc]=min(abs(deltaT));
0718     <span class="comment">%update 'bad' and 'good'</span>
0719     <span class="keyword">if</span> all(boolFlag)
0720         expData.data{handles.idx}.adaptParams.Data(loc,idxs)=[true, false]; 
0721     <span class="keyword">else</span>
0722         expData.data{handles.idx}.adaptParams.Data(loc,idxs)=[true, false]; 
0723     <span class="keyword">end</span>
0724 <span class="keyword">end</span>
0725 <span class="comment">%Re-plot</span>
0726 guidata(hObject, handles)
0727 <a href="#_sub13" class="code" title="subfunction plot_button_Callback(hObject, eventdata, handles)">plot_button_Callback</a>(handles.plot_button, eventdata, handles)
0728 <span class="keyword">end</span>
0729 
0730 <span class="comment">% --- Executes on button press in labelGoodButton.</span>
0731 <a name="_sub23" href="#_subfunctions" class="code">function labelGoodButton_Callback(hObject, eventdata, handles)</a>
0732 
0733 <span class="keyword">global</span> expData
0734 
0735 <span class="comment">%Select stride</span>
0736 axes(handles.axes1)
0737 [x,~]=ginput;
0738 [~,idxs]=expData.data{handles.idx}.adaptParams.isaLabel({<span class="string">'bad'</span>,<span class="string">'good'</span>});
0739 
0740 <span class="keyword">for</span> i=1:length(x);
0741     deltaT=expData.data{handles.idx}.adaptParams.hiddenTime-x(i);
0742     [~,loc]=min(abs(deltaT));
0743     <span class="comment">%update 'bad' and 'good'</span>
0744     expData.data{handles.idx}.adaptParams.Data(loc,idxs)=[false, true];   
0745 <span class="keyword">end</span>
0746 <span class="comment">%Re-plot</span>
0747 guidata(hObject, handles)
0748 <a href="#_sub13" class="code" title="subfunction plot_button_Callback(hObject, eventdata, handles)">plot_button_Callback</a>(handles.plot_button, eventdata, handles)
0749 <span class="keyword">end</span>
0750 
0751 <span class="comment">% --- Executes on button press in showBadCheck.</span>
0752 <a name="_sub24" href="#_subfunctions" class="code">function showBadCheck_Callback(hObject, eventdata, handles)</a>
0753 <a href="#_sub13" class="code" title="subfunction plot_button_Callback(hObject, eventdata, handles)">plot_button_Callback</a>(handles.plot_button,eventdata,handles)
0754 <span class="keyword">end</span>
0755 
0756 <span class="comment">%% ---------------------------Saving:-----------------------------</span>
0757 
0758 <span class="comment">% --- Executes on button press in save_button.</span>
0759 <a name="_sub25" href="#_subfunctions" class="code">function save_button_Callback(hObject, eventdata, handles)</a>
0760 
0761 <span class="keyword">global</span> expData 
0762 <span class="comment">% Possibly in the future we could force user to hit save if he/she wants changes to be saved.</span>
0763 
0764 <span class="comment">% HH: I think the next two lines are unneccesary since any changes to events would have already been saved to expData.</span>
0765 <span class="comment">% expData.data{handles.idx}.gaitEvents=handles.trialEvents;</span>
0766 <span class="comment">% expData.data{handles.idx}.adaptParams=calcParameters(expData.data{handles.idx});</span>
0767 handles.changed=true; <span class="comment">%% HH: this forces the changes to be saved, even if GUI is closed.</span>
0768 set(handles.write,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0769 guidata(hObject, handles)
0770 <span class="keyword">end</span>
0771 
0772 <a name="_sub26" href="#_subfunctions" class="code">function uiSaveButton_ClickedCallback(hObject, eventdata, handles)</a>
0773 <a href="#_sub27" class="code" title="subfunction write_Callback(hObject, eventdata, handles)">write_Callback</a>(handles.write,eventdata,handles)
0774 <span class="keyword">end</span>
0775 
0776 <span class="comment">% --- Executes on button press in write.</span>
0777 <a name="_sub27" href="#_subfunctions" class="code">function write_Callback(hObject, eventdata, handles)</a>
0778 <span class="keyword">global</span> expData
0779 
0780 <span class="comment">%Disable everything</span>
0781  handles=<a href="disableFields.html" class="code" title="function handles = disableFields(handles,varargin)">disableFields</a>(handles,<span class="string">'plot_button'</span>,<span class="string">'next_button'</span>,<span class="string">'back_button'</span>,<span class="keyword">...</span>
0782      <span class="string">'delete_button'</span>,<span class="string">'deleteNbutton'</span>,<span class="string">'save_button'</span>,<span class="string">'add_button'</span>,<span class="string">'BPdataType'</span>,<span class="keyword">...</span>
0783      <span class="string">'BPfield'</span>,<span class="string">'TPdataType'</span>,<span class="string">'TPfield'</span>,<span class="string">'condMenu'</span>,<span class="string">'trialMenu'</span>,<span class="string">'timeSlider'</span>,<span class="keyword">...</span>
0784      <span class="string">'maxCheck'</span>,<span class="string">'defaultRadio'</span>,<span class="string">'kinematicRadio'</span>,<span class="string">'forceRadio'</span>,<span class="string">'write'</span>,<span class="keyword">...</span>
0785      <span class="string">'labelBadButton'</span>,<span class="string">'labelGoodButton'</span>,<span class="string">'showBadCheck'</span>);
0786 
0787 set(handles.write,<span class="string">'String'</span>, <span class="string">'Writing...'</span>);
0788 
0789 drawnow
0790 
0791 <span class="comment">%Write to disk</span>
0792 eval([handles.varName <span class="string">'=expData;'</span>]); <span class="comment">%Assigning same var name</span>
0793 <span class="comment">%eval(['save(''' handles.Dir handles.filename ''',''' handles.varName</span>
0794 <span class="comment">%''');']); %PI: replaced this with the line below on 28/4/2015</span>
0795 save([handles.Dir handles.filename],handles.varName,<span class="string">'-v7.3'</span>);<span class="comment">%Saving with same var name</span>
0796 handles.changed=false;
0797 handles.saved=true;
0798 
0799 <span class="comment">%re-create adaptation parameters object</span>
0800 <span class="comment">%expData=expData.recomputeParameters; %% HH: I don't think this is necessary, should have already been re-computed earlier.</span>
0801 adaptData=expData.makeDataObj([handles.Dir handles.filename(1:end-4)]);
0802 <span class="comment">% eval(['save(''' handles.Dir handles.filename(1:end-4) 'params' ''',''adaptData'');']); %Saving with same var name --&gt; No longer needed, makeDataObj method automatically saves file.</span>
0803 
0804 <span class="comment">%Enable everything</span>
0805 handles=<a href="enableFields.html" class="code" title="function handles = enableFields(handles,varargin)">enableFields</a>(handles,<span class="string">'plot_button'</span>,<span class="string">'next_button'</span>,<span class="string">'back_button'</span>,<span class="keyword">...</span>
0806     <span class="string">'delete_button'</span>,<span class="string">'deleteNbutton'</span>,<span class="string">'save_button'</span>,<span class="string">'add_button'</span>,<span class="string">'BPdataType'</span>,<span class="keyword">...</span>
0807     <span class="string">'BPfield'</span>,<span class="string">'TPdataType'</span>,<span class="string">'TPfield'</span>,<span class="string">'condMenu'</span>,<span class="string">'timeSlider'</span>,<span class="string">'maxCheck'</span>,<span class="keyword">...</span>
0808     <span class="string">'trialMenu'</span>,<span class="string">'defaultRadio'</span>,<span class="string">'labelBadButton'</span>,<span class="string">'labelGoodButton'</span>);
0809 <span class="keyword">if</span> length(expData.data{end}.gaitEvents.labels)==12
0810     set(handles.kinematicRadio,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0811     set(handles.forceRadio,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0812 <span class="keyword">end</span>
0813 set(handles.write,<span class="string">'String'</span>, <span class="string">'Write to disk'</span>);
0814 guidata(hObject, handles);
0815 
0816 <span class="keyword">end</span>
0817 
0818 
0819 <span class="comment">%% ---------------------------CLOSING---------------------------------</span>
0820 
0821 <span class="comment">% --- Executes when user attempts to close GUI_window.</span>
0822 <a name="_sub28" href="#_subfunctions" class="code">function GUI_window_CloseRequestFcn(hObject, eventdata, handles)</a>
0823 
0824 <span class="comment">%See if subject file should be saved before closing</span>
0825 <span class="keyword">if</span> ~handles.changed &amp;&amp; isfield(handles,<span class="string">'filename'</span>) &amp;&amp; ~handles.saved
0826     choice = questdlg([<span class="string">'Do you want to save changes made to '</span>,handles.filename,<span class="string">'?'</span>], <span class="keyword">...</span>
0827     <span class="string">'ReviewEventsGUI'</span>, <span class="keyword">...</span>
0828     <span class="string">'Save'</span>,<span class="string">'Don''t Save'</span>,<span class="string">'Cancel'</span>,<span class="string">'Save'</span>);
0829     <span class="keyword">switch</span> choice
0830         <span class="keyword">case</span> <span class="string">'Save'</span>
0831             handles.changed=true;
0832         <span class="keyword">case</span> <span class="string">'Don''t Save'</span>
0833             handles.changed=false;
0834         <span class="keyword">case</span> {<span class="string">'Cancel'</span>,<span class="string">''</span>}
0835             <span class="keyword">return</span>
0836     <span class="keyword">end</span>
0837 <span class="keyword">end</span>
0838 
0839 <span class="keyword">if</span> handles.changed 
0840     <a href="#_sub27" class="code" title="subfunction write_Callback(hObject, eventdata, handles)">write_Callback</a>(handles.write,eventdata,handles)
0841 <span class="keyword">end</span>
0842 
0843 guidata(hObject, handles);
0844 <span class="comment">% Hint: delete(hObject) closes the figure</span>
0845 delete(handles.output);
0846 <span class="keyword">end</span>
0847 
0848 <span class="comment">%% ------------------------ Create Functions -----------------------------%</span>
0849 <span class="comment">% --- Executes during object creation, after setting all properties. ---%</span>
0850 
0851 <span class="comment">% hObject    handle to eventType (see GCBO)</span>
0852 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0853 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0854 
0855 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
0856 <span class="comment">%       See ISPC and COMPUTER.</span>
0857 
0858 <a name="_sub29" href="#_subfunctions" class="code">function directory_CreateFcn(hObject, eventdata, handles)</a>
0859 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0860     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0861     set(hObject,<span class="string">'String'</span>,<span class="string">'./'</span>);
0862 <span class="keyword">end</span>
0863 <span class="keyword">end</span>
0864 
0865 <a name="_sub30" href="#_subfunctions" class="code">function subject_CreateFcn(hObject, eventdata, handles)</a>
0866 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0867     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0868 <span class="keyword">end</span>
0869 <span class="keyword">end</span>
0870 
0871 <a name="_sub31" href="#_subfunctions" class="code">function condMenu_CreateFcn(hObject, eventdata, handles)</a>
0872 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0873     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0874 <span class="keyword">end</span>
0875 <span class="keyword">end</span>
0876 
0877 <a name="_sub32" href="#_subfunctions" class="code">function trialMenu_CreateFcn(hObject, eventdata, handles)</a>
0878 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0879     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0880 <span class="keyword">end</span>
0881 <span class="keyword">end</span>
0882 
0883 <a name="_sub33" href="#_subfunctions" class="code">function TPfield_CreateFcn(hObject, eventdata, handles)</a>
0884 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0885     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0886 <span class="keyword">end</span>
0887 <span class="keyword">end</span>
0888 
0889 <a name="_sub34" href="#_subfunctions" class="code">function TPdataType_CreateFcn(hObject, eventdata, handles)</a>
0890 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0891     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0892 <span class="keyword">end</span>
0893 <span class="keyword">end</span>
0894 
0895 <a name="_sub35" href="#_subfunctions" class="code">function BPdataType_CreateFcn(hObject, eventdata, handles)</a>
0896 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0897     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0898 <span class="keyword">end</span>
0899 <span class="keyword">end</span>
0900 
0901 <a name="_sub36" href="#_subfunctions" class="code">function BPfield_CreateFcn(hObject, eventdata, handles)</a>
0902 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0903     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0904 <span class="keyword">end</span>
0905 <span class="keyword">end</span>
0906 
0907 <a name="_sub37" href="#_subfunctions" class="code">function eventType_CreateFcn(hObject, eventdata, handles)</a>
0908 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0909     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0910 <span class="keyword">end</span>
0911 <span class="keyword">end</span>
0912 
0913 <a name="_sub38" href="#_subfunctions" class="code">function timeSlider_CreateFcn(hObject, eventdata, handles)</a>
0914 <span class="comment">% Hint: slider controls usually have a light gray background.</span>
0915 <span class="keyword">if</span> isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0916     set(hObject,<span class="string">'BackgroundColor'</span>,[.9 .9 .9]);
0917 <span class="keyword">end</span>
0918 <span class="keyword">end</span>
0919</pre></div>
<hr><address>Generated on Tue 08-Mar-2016 13:39:40 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>